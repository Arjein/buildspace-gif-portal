{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SplTokenAccountsCoder = void 0;\nconst BufferLayout = __importStar(require(\"buffer-layout\"));\nconst buffer_layout_js_1 = require(\"./buffer-layout.js\");\nconst common_1 = require(\"../common\");\nclass SplTokenAccountsCoder {\n  constructor(idl) {\n    this.idl = idl;\n  }\n  async encode(accountName, account) {\n    switch (accountName) {\n      case \"token\":\n        {\n          const buffer = Buffer.alloc(165);\n          const len = TOKEN_ACCOUNT_LAYOUT.encode(account, buffer);\n          return buffer.slice(0, len);\n        }\n      case \"mint\":\n        {\n          const buffer = Buffer.alloc(82);\n          const len = MINT_ACCOUNT_LAYOUT.encode(account, buffer);\n          return buffer.slice(0, len);\n        }\n      default:\n        {\n          throw new Error(`Invalid account name: ${accountName}`);\n        }\n    }\n  }\n  decode(accountName, ix) {\n    return this.decodeUnchecked(accountName, ix);\n  }\n  decodeUnchecked(accountName, ix) {\n    switch (accountName) {\n      case \"token\":\n        {\n          return decodeTokenAccount(ix);\n        }\n      case \"mint\":\n        {\n          return decodeMintAccount(ix);\n        }\n      default:\n        {\n          throw new Error(`Invalid account name: ${accountName}`);\n        }\n    }\n  }\n  // TODO: this won't use the appendData.\n  memcmp(accountName, _appendData) {\n    switch (accountName) {\n      case \"token\":\n        {\n          return {\n            dataSize: 165\n          };\n        }\n      case \"mint\":\n        {\n          return {\n            dataSize: 82\n          };\n        }\n      default:\n        {\n          throw new Error(`Invalid account name: ${accountName}`);\n        }\n    }\n  }\n  size(idlAccount) {\n    var _a;\n    return (_a = (0, common_1.accountSize)(this.idl, idlAccount)) !== null && _a !== void 0 ? _a : 0;\n  }\n}\nexports.SplTokenAccountsCoder = SplTokenAccountsCoder;\nfunction decodeMintAccount(ix) {\n  return MINT_ACCOUNT_LAYOUT.decode(ix);\n}\nfunction decodeTokenAccount(ix) {\n  return TOKEN_ACCOUNT_LAYOUT.decode(ix);\n}\nconst MINT_ACCOUNT_LAYOUT = BufferLayout.struct([(0, buffer_layout_js_1.coption)((0, buffer_layout_js_1.publicKey)(), \"mintAuthority\"), (0, buffer_layout_js_1.uint64)(\"supply\"), BufferLayout.u8(\"decimals\"), (0, buffer_layout_js_1.bool)(\"isInitialized\"), (0, buffer_layout_js_1.coption)((0, buffer_layout_js_1.publicKey)(), \"freezeAuthority\")]);\nconst TOKEN_ACCOUNT_LAYOUT = BufferLayout.struct([(0, buffer_layout_js_1.publicKey)(\"mint\"), (0, buffer_layout_js_1.publicKey)(\"authority\"), (0, buffer_layout_js_1.uint64)(\"amount\"), (0, buffer_layout_js_1.coption)((0, buffer_layout_js_1.publicKey)(), \"delegate\"), BufferLayout.u8(\"state\"), (0, buffer_layout_js_1.coption)((0, buffer_layout_js_1.uint64)(), \"isNative\"), (0, buffer_layout_js_1.uint64)(\"delegatedAmount\"), (0, buffer_layout_js_1.coption)((0, buffer_layout_js_1.publicKey)(), \"closeAuthority\")]);","map":{"version":3,"mappings":"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","names":["SplTokenAccountsCoder","constructor","idl","encode","accountName","account","buffer","Buffer","alloc","len","TOKEN_ACCOUNT_LAYOUT","slice","MINT_ACCOUNT_LAYOUT","Error","decode","ix","decodeUnchecked","decodeTokenAccount","decodeMintAccount","memcmp","_appendData","dataSize","size","idlAccount","exports","BufferLayout","struct","u8"],"sourceRoot":"","sources":["../../../../src/coder/spl-token/accounts.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}