{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BorshTypesCoder = void 0;\nconst buffer_1 = require(\"buffer\");\nconst idl_js_1 = require(\"./idl.js\");\n/**\n * Encodes and decodes user-defined types.\n */\nclass BorshTypesCoder {\n  constructor(idl) {\n    if (idl.types === undefined) {\n      this.typeLayouts = new Map();\n      return;\n    }\n    const layouts = idl.types.map(acc => {\n      return [acc.name, idl_js_1.IdlCoder.typeDefLayout(acc, idl.types)];\n    });\n    this.typeLayouts = new Map(layouts);\n    this.idl = idl;\n  }\n  encode(typeName, type) {\n    const buffer = buffer_1.Buffer.alloc(1000); // TODO: use a tighter buffer.\n    const layout = this.typeLayouts.get(typeName);\n    if (!layout) {\n      throw new Error(`Unknown type: ${typeName}`);\n    }\n    const len = layout.encode(type, buffer);\n    return buffer.slice(0, len);\n  }\n  decode(typeName, typeData) {\n    const layout = this.typeLayouts.get(typeName);\n    if (!layout) {\n      throw new Error(`Unknown type: ${typeName}`);\n    }\n    return layout.decode(typeData);\n  }\n}\nexports.BorshTypesCoder = BorshTypesCoder;","map":{"version":3,"mappings":";;;;;;AAAA;AAGA;AAGA;;;AAGA,MAAaA,eAAe;EAW1BC,YAAmBC,GAAQ;IACzB,IAAIA,GAAG,CAACC,KAAK,KAAKC,SAAS,EAAE;MAC3B,IAAI,CAACC,WAAW,GAAG,IAAIC,GAAG,EAAE;MAC5B;;IAEF,MAAMC,OAAO,GAAkBL,GAAG,CAACC,KAAK,CAACK,GAAG,CAAEC,GAAG,IAAI;MACnD,OAAO,CAACA,GAAG,CAACC,IAAS,EAAEC,iBAAQ,CAACC,aAAa,CAACH,GAAG,EAAEP,GAAG,CAACC,KAAK,CAAC,CAAC;IAChE,CAAC,CAAC;IAEF,IAAI,CAACE,WAAW,GAAG,IAAIC,GAAG,CAACC,OAAO,CAAC;IACnC,IAAI,CAACL,GAAG,GAAGA,GAAG;EAChB;EAEOW,MAAM,CAAUC,QAAW,EAAEC,IAAO;IACzC,MAAMC,MAAM,GAAGC,eAAM,CAACC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;IACnC,MAAMC,MAAM,GAAG,IAAI,CAACd,WAAW,CAACe,GAAG,CAACN,QAAQ,CAAC;IAC7C,IAAI,CAACK,MAAM,EAAE;MACX,MAAM,IAAIE,KAAK,CAAC,iBAAiBP,QAAQ,EAAE,CAAC;;IAE9C,MAAMQ,GAAG,GAAGH,MAAM,CAACN,MAAM,CAACE,IAAI,EAAEC,MAAM,CAAC;IAEvC,OAAOA,MAAM,CAACO,KAAK,CAAC,CAAC,EAAED,GAAG,CAAC;EAC7B;EAEOE,MAAM,CAAUV,QAAW,EAAEW,QAAgB;IAClD,MAAMN,MAAM,GAAG,IAAI,CAACd,WAAW,CAACe,GAAG,CAACN,QAAQ,CAAC;IAC7C,IAAI,CAACK,MAAM,EAAE;MACX,MAAM,IAAIE,KAAK,CAAC,iBAAiBP,QAAQ,EAAE,CAAC;;IAE9C,OAAOK,MAAM,CAACK,MAAM,CAACC,QAAQ,CAAC;EAChC;;AAzCFC","names":["BorshTypesCoder","constructor","idl","types","undefined","typeLayouts","Map","layouts","map","acc","name","idl_js_1","typeDefLayout","encode","typeName","type","buffer","buffer_1","alloc","layout","get","Error","len","slice","decode","typeData","exports"],"sourceRoot":"","sources":["../../../../src/coder/borsh/types.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}